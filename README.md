# 議員政務活動費バブルチャート可視化ツール

## 概要

このp5.jsスケッチは、地方議員の政務活動費支出項目と金額をバブルチャートで可視化します。  
複数の表示モード（議員ごと、支出項目ごと、全体まとめて）に対応し、ユーザーは複数議員の絞り込みやバブルサイズ調整も可能です。

---

## 特徴

- CSVファイルから支出データと支出項目を読み込み
- 支出金額に応じたバブルサイズで視覚的に比較可能
- 議員別表示では複数議員を選択し、碁盤目状に配置
- 支出項目別表示は項目ごとに横並びでクラスタ化
- 全体表示は全バブルが中央に集合
- マウスオーバーで詳細情報（議員名、支出項目、金額）を表示
- UIにバブルサイズスライダーと表示モード切替ボタンを装備
- 議員リストの表示・非表示も切替可能

---

## ファイル構成

- `sketch.js` ... メインのp5.jsコード
- `data.csv` ... 議員ごとの支出データ
- `items.csv` ... 支出項目一覧

---

## CSVファイルフォーマット

### data.csv

| name     | item     | amount  |
|----------|----------|---------|
| 議員A    | 研修費   | 50000   |
| 議員A    | 調査研究費 | 30000   |
| 議員B    | 資料購入費 | 100000  |
| ...      | ...      | ...     |

- `name`: 議員名（文字列）
- `item`: 支出項目名（`items.csv`と一致する必要あり）
- `amount`: 支出金額（整数）

---

### items.csv

| item       |
|------------|
| 研修費     |
| 調査研究費 |
| 資料作成費 |
| 資料購入費 |
| 広報費     |
| 公聴費     |
| 人件費     |
| 事務所費   |
| 要請・陳情活動費 |
| 会議費     |

- 支出項目名の一覧。`data.csv`の`item`カラムの値と一致する必要があります。

---

## 使い方

1. `data.csv` と `items.csv` をプロジェクトフォルダに用意する。  
2. `index.html` からp5.jsと`sketch.js`を読み込んで実行。  
3. ページ上部の「議員ごと」「支出項目ごと」「全部まとめて」ボタンで表示モード切替。  
4. 「議員リスト表示」ボタンで議員選択リストを開き、複数議員を選択可能。  
5. バブルサイズスライダーでバブルの大きさを調整可能。  
6. バブルにマウスを乗せると詳細情報のツールチップを表示。  

---

## 開発環境

- p5.js ライブラリ  
- ブラウザ（推奨 Chrome, Firefox）  
- CSVファイルはUTF-8で保存推奨  

---

## 仕様詳細

- バブルの大きさはCSV中の`amount`の最小値・最大値から自動スケーリング（半径10px〜30px）  
- 議員ごと表示時は選択した議員のバブルを碁盤目状に配置し、クラスタ中心に議員名ラベル表示  
- 支出項目ごと表示時は項目ごとに横並びでクラスタ形成し、中心に項目名ラベル表示  
- 全体表示時はバブルを中央に集める。  
- 各クラスタ内でバブル同士が重ならないように反発処理を繰り返し実施  
- バブルの移動はイージング（スムーズ）で描画  
- UIはp5.jsの`createButton`、`createSelect`、`createSlider`で構成  

---

## 作者

[KAZUNOBU IKAGAWA]
